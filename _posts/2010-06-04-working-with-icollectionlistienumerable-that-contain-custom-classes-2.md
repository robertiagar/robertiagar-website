---
layout: post
title: Working with ICollection/List/IEnumerable that contain custom classes
date: 2010-06-04 01:37
author: "Robert Iagar"
comments: true
tags: [.NET General, C#]
---
Again, about my <a href="http://xbladegraphix.co.cc/TwitBy">Twitter Client</a>. I’ve made a custom class show the tweet and then a ICollection for the public property of the Tweets in the TwitterViewModel.<br /><br /><a name='more'></a><br /><br />Problem: Each I time I get new tweets I have to empty the Collection. I tried to use the Contains method every time I added a new Tweet, but as <a href="http://10rem.net">Pete Brown</a> said that will always return false.<br /><br />Solution: Implement IEquatable on my Tweet class. Now when Contains check if the tweet exists in the list it will work.<br /><br />Other example.<br /><br />Say you have this custom class:<br /><br />class User<br />{<br />      public string Name { get; set; }<br />      public long ID { get; set; }<br />}<br /><br />Not going to bother INotifyPropertyChanged. This will be only about the IEquatable class.<br /><br />Create a ICollection and add some data:<br /><br />ICollection list = new List();<br />list.Add(new User { Name = “Robert”, ID = 123409 });<br />list.Add(new User { Name = “Pete”, ID = 23410 });<br /><br />Now. Say you have some form that creates a new User, check if it exists and then tries to add it. For sake of simplicity I won’t use a form:<br /><br />var user = new User { Name = “Pete”, ID= 23410 });<br />if(!list.Contains(user))<br />     list.Add(user);<br /><br />This won’t work. It’ll add it even you know that it contains it. Simply put “Two instances of a class representing the same tweet (or in this case user) are two different things.” (<a href="http://twitter.com/Pete_Brown/status/15341247123">@Pete_Brown on Twitter</a>)<br /><br />Implement the IEquatable class and your class should look like this:<br /><br />class User: IEquatable<br />{<br />      public string Name { get; set; }<br />      public long ID { get; set; }<br /><br />      public bool Equals(User other)<br />      {<br />            if(other.ID == this.ID)<br />                  return true;<br />            else<br />                  return false;<br />      }<br />}<br /><br />Now Contains() will work properly and your List manipulations will work like a charm.<br /><br />Hope you found this post useful. It’s been a pain of figuring it out. Had help from Pete Brown.<br />Subscribe to his blog: <a href="http://10rem.net">http://10rem.net</a><br />Follow him on Twitter: <a href="http://twitter.com/Pete_Brown">http://twitter.com/Pete_Brown</a><br /><br />Me? You can find my blog at <a href="http://robertiagar.wordpress.com/">http://robertiagar.wordpress.com/</a> (mouthful I know) and Twitter: <a href="http://twitter.com/RobertIagar">http://twitter.com/RobertIagar</a><br /><br />Stay tuned for more interesting finds…
